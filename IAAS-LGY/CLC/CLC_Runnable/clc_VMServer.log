2013/08/21 18:24:08 Wednesday [INFO] receive a connection from 127.0.0.1.
2013/08/21 18:24:08 Wednesday [INFO] receive the command size:0030
2013/08/21 18:24:08 Wednesday [INFO] receive cmd LOGIN:user=test1,passwd=123456.
2013/08/21 18:24:08 Wednesday [INFO] begin Login::Do().
2013/08/21 18:24:08 Wednesday [INFO] begin process parameter.
2013/08/21 18:24:08 Wednesday [INFO] end process parameter.
2013/08/21 18:24:08 Wednesday [INFO] begin to send login request to auth server.
2013/08/21 18:24:08 Wednesday [INFO] send login request to auth server success.
2013/08/21 18:24:08 Wednesday [INFO] begin to read auth server ack.
2013/08/21 18:24:08 Wednesday [INFO] read auth server ack success.
2013/08/21 18:24:08 Wednesday [INFO] Process::sendAck send ack message:ACK:LOGIN:RETN=0,DESC=success
2013/08/21 18:24:08 Wednesday [INFO] receive the command size:0070
2013/08/21 18:24:08 Wednesday [INFO] receive cmd CRE VM:vmname=lgy_test,tid=2,ram=1024,cpu=2,virttype=kvm,groupAmount=4.
2013/08/21 18:24:08 Wednesday [INFO] begin CreateVM::Do().
2013/08/21 18:24:08 Wednesday [INFO] begin process parameter.
2013/08/21 18:24:08 Wednesday [INFO] end process parameter.
2013/08/21 18:24:08 Wednesday [INFO] execute: select id from User where user=test1.
2013/08/21 18:24:08 Wednesday [INFO] Create Group For User: test1
2013/08/21 18:24:08 Wednesday [INFO] execute: insert into `Group` (`UserID`,`Date`) values (12,NOW()).
2013/08/21 18:24:08 Wednesday [INFO] execute: SELECT @@IDENTITY AS ID.
2013/08/21 18:24:08 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test0 and userid=12.
2013/08/21 18:24:08 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 18:24:08 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 18:24:08 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 18:24:08 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 18:24:08 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 18:24:08 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 18:24:08 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 18:24:08 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 18:24:08 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 18:24:08 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),12,0).
2013/08/21 18:24:08 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test and userid=12.
2013/08/21 18:24:08 Wednesday [INFO] execute: update MACIP set vmid=359 where mac=00:16:3e:00:00:01.
2013/08/21 18:24:08 Wednesday [INFO] end insert new vm data to db.
2013/08/21 18:24:08 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 18:24:08 Wednesday [INFO] begin to mount 192.168.101.11:/home/dislab/iaas_nfs/Ubuntu_10.04 to /root/Dev/IAAS-LGY/CLC/CLC_Runnable/nfs/192.168.101.11_home-dislab-iaas_nfs-Ubuntu_10.04
2013/08/21 18:24:08 Wednesday [INFO] mount 192.168.101.11:/home/dislab/iaas_nfs/Ubuntu_10.04 to /root/Dev/IAAS-LGY/CLC/CLC_Runnable/nfs/192.168.101.11_home-dislab-iaas_nfs-Ubuntu_10.04 success.
2013/08/21 18:24:08 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 18:24:08 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 18:24:08 Wednesday [INFO] end create new vm XML file .
2013/08/21 18:24:08 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test1 and userid=12.
2013/08/21 18:24:08 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 18:24:08 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 18:24:08 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 18:24:08 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 18:24:08 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:02.
2013/08/21 18:24:08 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 18:24:08 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 18:24:08 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 18:24:08 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 18:24:08 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),12,1).
2013/08/21 18:24:08 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test and userid=12.
2013/08/21 18:24:08 Wednesday [INFO] execute: update MACIP set vmid=359 where mac=00:16:3e:00:00:02.
2013/08/21 18:24:08 Wednesday [INFO] end insert new vm data to db.
2013/08/21 18:24:08 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 18:24:08 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 18:24:09 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 18:24:09 Wednesday [INFO] end create new vm XML file .
2013/08/21 18:24:09 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test2 and userid=12.
2013/08/21 18:24:09 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 18:24:09 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 18:24:09 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 18:24:09 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 18:24:09 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:03.
2013/08/21 18:24:09 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 18:24:09 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 18:24:09 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 18:24:09 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 18:24:09 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),12,2).
2013/08/21 18:24:09 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test and userid=12.
2013/08/21 18:24:09 Wednesday [INFO] execute: update MACIP set vmid=359 where mac=00:16:3e:00:00:03.
2013/08/21 18:24:09 Wednesday [INFO] end insert new vm data to db.
2013/08/21 18:24:09 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 18:24:09 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 18:24:09 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 18:24:09 Wednesday [INFO] end create new vm XML file .
2013/08/21 18:24:09 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test3 and userid=12.
2013/08/21 18:24:09 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 18:24:09 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 18:24:09 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 18:24:09 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 18:24:09 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:04.
2013/08/21 18:24:09 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 18:24:09 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 18:24:09 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 18:24:09 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 18:24:09 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),12,3).
2013/08/21 18:24:09 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test and userid=12.
2013/08/21 18:24:09 Wednesday [INFO] execute: update MACIP set vmid=359 where mac=00:16:3e:00:00:04.
2013/08/21 18:24:09 Wednesday [INFO] end insert new vm data to db.
2013/08/21 18:24:09 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 18:24:09 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 18:24:10 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 18:24:10 Wednesday [INFO] end create new vm XML file .
2013/08/21 18:24:10 Wednesday [INFO] end CreateVM::Do().
2013/08/21 18:24:10 Wednesday [INFO] send ack message:ACK:CRE VM:RETN=0,DESC=success
2013/08/21 18:24:10 Wednesday [INFO] receive the command size:
2013/08/21 18:24:10 Wednesday [INFO] clinet close the connection.
2013/08/21 19:07:10 Wednesday [INFO] receive a connection from 127.0.0.1.
2013/08/21 19:07:10 Wednesday [INFO] receive the command size:0030
2013/08/21 19:07:10 Wednesday [INFO] receive cmd LOGIN:user=test1,passwd=123456.
2013/08/21 19:07:10 Wednesday [INFO] begin Login::Do().
2013/08/21 19:07:10 Wednesday [INFO] begin process parameter.
2013/08/21 19:07:10 Wednesday [INFO] end process parameter.
2013/08/21 19:07:10 Wednesday [INFO] begin to send login request to auth server.
2013/08/21 19:07:10 Wednesday [INFO] send login request to auth server success.
2013/08/21 19:07:10 Wednesday [INFO] begin to read auth server ack.
2013/08/21 19:07:10 Wednesday [INFO] read auth server ack success.
2013/08/21 19:07:10 Wednesday [INFO] Process::sendAck send ack message:ACK:LOGIN:RETN=0,DESC=success
2013/08/21 19:07:10 Wednesday [INFO] receive the command size:0070
2013/08/21 19:07:10 Wednesday [INFO] receive cmd CRE VM:vmname=lgy_test,tid=2,ram=1024,cpu=2,virttype=kvm,groupAmount=4.
2013/08/21 19:07:10 Wednesday [INFO] begin CreateVM::Do().
2013/08/21 19:07:10 Wednesday [INFO] begin process parameter.
2013/08/21 19:07:10 Wednesday [INFO] end process parameter.
2013/08/21 19:07:10 Wednesday [INFO] execute: select id from User where user=test1.
2013/08/21 19:07:10 Wednesday [INFO] Create Group For User: test1
2013/08/21 19:07:10 Wednesday [INFO] execute: insert into `Group` (`UserID`,`Date`) values (12,NOW()).
2013/08/21 19:07:10 Wednesday [INFO] execute: SELECT @@IDENTITY AS ID.
2013/08/21 19:07:10 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test0 and userid=12.
2013/08/21 19:07:10 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:07:10 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:07:10 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:07:10 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:07:10 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:10 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:07:10 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:07:10 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:07:10 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:07:10 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test0,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),13,0).
2013/08/21 19:07:10 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test0 and userid=12.
2013/08/21 19:07:10 Wednesday [INFO] execute: update MACIP set vmid=363 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:10 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:07:10 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 19:07:10 Wednesday [INFO] begin to mount 192.168.101.11:/home/dislab/iaas_nfs/Ubuntu_10.04 to /root/Dev/IAAS-LGY/CLC/CLC_Runnable/nfs/192.168.101.11/home-dislab-iaas_nfs-Ubuntu_10.04
2013/08/21 19:07:10 Wednesday [INFO] mount 192.168.101.11:/home/dislab/iaas_nfs/Ubuntu_10.04 to /root/Dev/IAAS-LGY/CLC/CLC_Runnable/nfs/192.168.101.11/home-dislab-iaas_nfs-Ubuntu_10.04 success.
2013/08/21 19:07:10 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 19:07:10 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 19:07:10 Wednesday [INFO] end create new vm XML file .
2013/08/21 19:07:10 Wednesday [INFO] create vm failed,clear data.
2013/08/21 19:07:10 Wednesday [INFO] execute: delete from VMDetail where UUID=d37de7ea-0a51-11e3-a709-1078d2a150ab.
2013/08/21 19:07:10 Wednesday [INFO] execute: update MACIP set vmid=0 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:10 Wednesday [INFO] recv ack message:ACK:DEL NFS STOR:RETN=0,DESC=succeed from sc node server.
2013/08/21 19:07:10 Wednesday [INFO] apply sc server to free disk success.
2013/08/21 19:07:10 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test1 and userid=12.
2013/08/21 19:07:10 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:07:10 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:07:10 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:07:10 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:07:11 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:07:11 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:07:11 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test1,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),13,1).
2013/08/21 19:07:11 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test1 and userid=12.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=364 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=1,DESC=not succeed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] get para ip error from ack message.
2013/08/21 19:07:11 Wednesday [ERROR]  apply capacity for vm error.
2013/08/21 19:07:11 Wednesday [INFO] create vm failed,clear data.
2013/08/21 19:07:11 Wednesday [INFO] execute: delete from VMDetail where UUID=d39dfe90-0a51-11e3-a709-1078d2a150ab.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=0 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:DEL NFS STOR:RETN=1,DESC=not existed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] apply sc server to free disk failed.
2013/08/21 19:07:11 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test2 and userid=12.
2013/08/21 19:07:11 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:07:11 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:07:11 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:07:11 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:07:11 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:07:11 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:07:11 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test2,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),13,2).
2013/08/21 19:07:11 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test2 and userid=12.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=365 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=1,DESC=not succeed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] get para ip error from ack message.
2013/08/21 19:07:11 Wednesday [ERROR]  apply capacity for vm error.
2013/08/21 19:07:11 Wednesday [INFO] create vm failed,clear data.
2013/08/21 19:07:11 Wednesday [INFO] execute: delete from VMDetail where UUID=d3abfb4e-0a51-11e3-a709-1078d2a150ab.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=0 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:DEL NFS STOR:RETN=1,DESC=not existed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] apply sc server to free disk failed.
2013/08/21 19:07:11 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test3 and userid=12.
2013/08/21 19:07:11 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:07:11 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:07:11 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:07:11 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:07:11 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:07:11 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:07:11 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test3,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),13,3).
2013/08/21 19:07:11 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test3 and userid=12.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=366 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=1,DESC=not succeed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] get para ip error from ack message.
2013/08/21 19:07:11 Wednesday [ERROR]  apply capacity for vm error.
2013/08/21 19:07:11 Wednesday [INFO] create vm failed,clear data.
2013/08/21 19:07:11 Wednesday [INFO] execute: delete from VMDetail where UUID=d3ba110c-0a51-11e3-a709-1078d2a150ab.
2013/08/21 19:07:11 Wednesday [INFO] execute: update MACIP set vmid=0 where mac=00:16:3e:00:00:01.
2013/08/21 19:07:11 Wednesday [INFO] recv ack message:ACK:DEL NFS STOR:RETN=1,DESC=not existed from sc node server.
2013/08/21 19:07:11 Wednesday [ERROR] apply sc server to free disk failed.
2013/08/21 19:07:11 Wednesday [INFO] send ack message:ACK:CRE VM:RETN=8,DESC=system internal error,apply disk space error
2013/08/21 19:07:11 Wednesday [INFO] receive the command size:
2013/08/21 19:07:11 Wednesday [INFO] clinet close the connection.
2013/08/21 19:40:20 Wednesday [ERROR] Init Process error
2013/08/21 19:40:44 Wednesday [INFO] receive a connection from 127.0.0.1.
2013/08/21 19:40:44 Wednesday [INFO] receive the command size:0030
2013/08/21 19:40:44 Wednesday [INFO] receive cmd LOGIN:user=test1,passwd=123456.
2013/08/21 19:40:44 Wednesday [INFO] begin Login::Do().
2013/08/21 19:40:44 Wednesday [INFO] begin process parameter.
2013/08/21 19:40:44 Wednesday [INFO] end process parameter.
2013/08/21 19:40:44 Wednesday [INFO] begin to send login request to auth server.
2013/08/21 19:40:44 Wednesday [INFO] send login request to auth server success.
2013/08/21 19:40:44 Wednesday [INFO] begin to read auth server ack.
2013/08/21 19:40:44 Wednesday [INFO] read auth server ack success.
2013/08/21 19:40:44 Wednesday [INFO] Process::sendAck send ack message:ACK:LOGIN:RETN=0,DESC=success
2013/08/21 19:40:44 Wednesday [INFO] receive the command size:0070
2013/08/21 19:40:44 Wednesday [INFO] receive cmd CRE VM:vmname=lgy_test,tid=2,ram=1024,cpu=2,virttype=kvm,groupAmount=4.
2013/08/21 19:40:44 Wednesday [INFO] begin CreateVM::Do().
2013/08/21 19:40:44 Wednesday [INFO] begin process parameter.
2013/08/21 19:40:44 Wednesday [INFO] end process parameter.
2013/08/21 19:40:44 Wednesday [INFO] execute: select id from User where user=test1.
2013/08/21 19:40:44 Wednesday [INFO] Create Group For User: test1
2013/08/21 19:40:44 Wednesday [INFO] execute: insert into `Group` (`UserID`,`Date`) values (12,NOW()).
2013/08/21 19:40:44 Wednesday [INFO] execute: SELECT @@IDENTITY AS ID.
2013/08/21 19:40:44 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test0 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:40:44 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:40:44 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:01.
2013/08/21 19:40:44 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:40:44 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:40:44 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test0,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),14,0).
2013/08/21 19:40:44 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test0 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=367 where mac=00:16:3e:00:00:01.
2013/08/21 19:40:44 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 19:40:44 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 19:40:44 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 19:40:44 Wednesday [INFO] end create new vm XML file .
2013/08/21 19:40:44 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test1 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:40:44 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:40:44 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:02.
2013/08/21 19:40:44 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:40:44 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:40:44 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test1,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),14,1).
2013/08/21 19:40:44 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test1 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=368 where mac=00:16:3e:00:00:02.
2013/08/21 19:40:44 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 19:40:44 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 19:40:44 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 19:40:44 Wednesday [INFO] end create new vm XML file .
2013/08/21 19:40:44 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test2 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:40:44 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:40:44 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:03.
2013/08/21 19:40:44 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:40:44 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:40:44 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test2,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),14,2).
2013/08/21 19:40:44 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test2 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=369 where mac=00:16:3e:00:00:03.
2013/08/21 19:40:44 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 19:40:44 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 19:40:44 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 19:40:44 Wednesday [INFO] end create new vm XML file .
2013/08/21 19:40:44 Wednesday [INFO] execute: select id from VMDetail where vmname=lgy_test3 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: SELECT COUNT(*) AS VMCNT FROM VMDetail where userid=12.
2013/08/21 19:40:44 Wednesday [INFO] begin get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] execute: lock table MACIP write;.
2013/08/21 19:40:44 Wednesday [INFO] execute: select mac from MACIP where vmid=0 LIMIT 0,1.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=-1 where mac=00:16:3e:00:00:04.
2013/08/21 19:40:44 Wednesday [INFO] execute: UNLOCK TABLE ;.
2013/08/21 19:40:44 Wednesday [INFO] end get a free mac/ip address for new vm .
2013/08/21 19:40:44 Wednesday [INFO] begin insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] execute: select DiskSize,FileName,RamSize,CPU,OS,IsParaVirt from VMTemplate where id=2.
2013/08/21 19:40:44 Wednesday [INFO] execute: insert into VMDetail (VMNAME,OS,DISK,RAM,VCPU,USERID,IsParaVirt,VirtType,uuid,GroupID,GroupInnerID) values(lgy_test3,Ubuntu 10.04,10,1024,2,12,0,kvm,UUID(),14,3).
2013/08/21 19:40:44 Wednesday [INFO] execute: select id,uuid from VMDetail where VMName=lgy_test3 and userid=12.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=370 where mac=00:16:3e:00:00:04.
2013/08/21 19:40:44 Wednesday [INFO] end insert new vm data to db.
2013/08/21 19:40:44 Wednesday [INFO] recv ack message:ACK:APPLY NFS STOR:RETN=0,DESC=succeed,IP=192.168.101.11,dirname=/home/dislab/iaas_nfs/Ubuntu_10.04 from sc node server.
2013/08/21 19:40:44 Wednesday [INFO] begin create new vm cfg file .
2013/08/21 19:40:44 Wednesday [INFO]  modify the XML file of vm lgy_test success.
2013/08/21 19:40:44 Wednesday [INFO] end create new vm XML file .
2013/08/21 19:40:44 Wednesday [INFO] create vm failed,clear data.
2013/08/21 19:40:44 Wednesday [INFO] execute: delete from VMDetail where UUID=83f62d5e-0a56-11e3-a709-1078d2a150ab.
2013/08/21 19:40:44 Wednesday [INFO] execute: update MACIP set vmid=0 where mac=00:16:3e:00:00:04.
2013/08/21 19:40:44 Wednesday [INFO] recv ack message:ACK:DEL NFS STOR:RETN=0,DESC=succeed from sc node server.
2013/08/21 19:40:44 Wednesday [INFO] apply sc server to free disk success.
2013/08/21 19:40:44 Wednesday [INFO] send ack message:ACK:CRE VM:RETN=8,DESC=system internal error,prepare virtual disk error,please retry later
2013/08/21 19:40:45 Wednesday [INFO] receive the command size:
2013/08/21 19:40:45 Wednesday [INFO] clinet close the connection.
